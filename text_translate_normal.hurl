################################################################
############## æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ æ­£å‘ç”¨ä¾‹é›†æˆæµ‹è¯• ##############
################################################################

# é‚®ç®±ç™»å½•
POST {{live_translator_login_host}}/lvtrans/user/auth/loginByEmail
{
    "email": "{{email}}",
    "password": "{{password}}"
}
HTTP 200
[Asserts]
header "Authorization" not isEmpty
header "Refreshtoken" not isEmpty
jsonpath "$.code" == 200
jsonpath "$.data.email" == "{{email}}"
[Captures]
token: header "Authorization"

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ï¼ŒæŒ‡å®šæºè¯­è¨€ ä¼ æ‰€æœ‰å‚æ•°
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "hello world",
    "from": "en-US",
    "to": "zh-CN"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" isEmpty
jsonpath "$.data.translate_text" == "ä½ å¥½ï¼Œä¸–ç•Œ"

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ Request Headers: X-Platformä¼ timekettle
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: timekettle
{
    "content": "hello world",
    "from": "en-US",
    "to": "zh-CN"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" isEmpty
jsonpath "$.data.translate_text" == "ä½ å¥½ï¼Œä¸–ç•Œ"

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ï¼Œè‡ªåŠ¨æ£€æµ‹æºè¯­è¨€ Request Body: ä¸ä¼ from
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "hello world",
    "to": "zh-CN"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" matches /en-/
jsonpath "$.data.translate_text" == "ä½ å¥½ï¼Œä¸–ç•Œ"

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ï¼Œè‡ªåŠ¨æ£€æµ‹æºè¯­è¨€ Request Body: contentä¼ çŸ­æ–‡æœ¬
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "ä½ ",
    "to": "en-US"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" matches /zh-/
jsonpath "$.data.translate_text" == "You"

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ï¼Œè‡ªåŠ¨æ£€æµ‹æºè¯­è¨€ Request Body: contentä¼ é•¿æ–‡æœ¬
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "{{content_long}}",
    "to": "en-US"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" == "zh-CN"
jsonpath "$.data.translate_text" matches /ShenZhen|hometown/

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ï¼Œè‡ªåŠ¨æ£€æµ‹æºè¯­è¨€ Request Body: contentä¼ çº¯ç‰¹æ®Šç¬¦å·
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "$#%^&<@!*",
    "to": "en-US"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ï¼Œè‡ªåŠ¨æ£€æµ‹æºè¯­è¨€ Request Body: contentä¼ emojiè¡¨æƒ…ç¬¦å·
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š",
    "to": "en-US"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ï¼Œè‡ªåŠ¨æ£€æµ‹æºè¯­è¨€ Request Body: contentä¼ æ­£å¸¸å­—ç¬¦ã€ç‰¹æ®Šå­—ç¬¦ã€emojiçš„ç»„åˆæ–‡æœ¬
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "@#&ä½ å¥½ï¼Œ@#ï¿¥%&*æˆ‘å–œæ¬¢åƒé±¼ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š",
    "to": "en-US"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" == "zh-CN"
jsonpath "$.data.translate_text" matches /hello|like|eat|fish/

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ï¼ŒæŒ‡å®šæºè¯­è¨€ Request Body: contentä¼ ä¸fromä¸ä¸€è‡´çš„è¯­è¨€æ–‡æœ¬
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "ã“ã‚“ã«ã¡ã¯ã€åˆã‚ã¾ã—ã¦ã€ã©ã†ãã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚",
    "from": "en-US",
    "to": "zh-CN"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" isEmpty
jsonpath "$.data.translate_text" matches /ä½ å¥½|å…³ç…§|è®¤è¯†|åˆæ¬¡è§é¢/

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ è‡ªåŠ¨æ£€æµ‹è¯­ç§ï¼Œ Request Body: contentä¼ ä¸toä¸€è‡´çš„è¯­è¨€æ–‡æœ¬
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "ä½ å¥½ï¼Œæˆ‘å–œæ¬¢åƒé±¼ã€‚",
    "to": "zh-CN"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" == "zh-CN"
jsonpath "$.data.translate_text" == "ä½ å¥½ï¼Œæˆ‘å–œæ¬¢åƒé±¼ã€‚"

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ æŒ‡å®šæºè¯­è¨€ï¼Œ Request Body: contentä¼ ä¸toä¸€è‡´çš„è¯­è¨€æ–‡æœ¬
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "ä½ å¥½ï¼Œæˆ‘å–œæ¬¢åƒé±¼ã€‚",
    "from": "en-US",
    "to": "zh-CN"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" isEmpty
jsonpath "$.data.translate_text" == "ä½ å¥½ï¼Œæˆ‘å–œæ¬¢åƒé±¼ã€‚"

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ Request Body: fromä¼ ç©ºå€¼
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "ä½ å¥½ï¼Œæˆ‘å–œæ¬¢åƒé±¼ã€‚",
    "from": "",
    "to": "en-US"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" == "zh-CN"
jsonpath "$.data.translate_text" matches /hello|like|eat|fish/

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ Request Body: fromä¼ null
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "ä½ å¥½ï¼Œæˆ‘å–œæ¬¢åƒé±¼ã€‚",
    "from": null,
    "to": "en-US"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" == "zh-CN"
jsonpath "$.data.translate_text" matches /hello|like|eat|fish/

# æ–‡æœ¬ç¿»è¯‘è‡ªåŠ¨è¯†åˆ«è¯­ç§æ¥å£ Request Body: toä¼ éæ³•çš„è¯­è¨€code
POST {{live_translator_host}}/livetranslator/translate/text
Authorization: Bearer {{token}}
X-Platform: livetranslator
{
    "content": "ä½ å¥½ï¼Œæˆ‘å–œæ¬¢åƒé±¼ã€‚",
    "to": "ab-CD"
}
HTTP 200
[Asserts]
jsonpath "$.code" == 0
jsonpath "$.message" == "Success"
jsonpath "$.data.detect_language" == "zh-CN"
jsonpath "$.data.translate_text" not isEmpty
